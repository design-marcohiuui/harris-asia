
<section class="hero" style="min-height: 72vh;">
    <ng-container *ngIf="(auth.user$ | async) || {} as user">
        <div class="container">
            <form [formGroup]="signupForm" *ngIf="!user.uid" (ngSubmit)="signup()">
                <div class="container-fluid has-text-black">
                    <div class="field is-family-sans-serif">
                        <div class="has-text-centered has-text-weight-semibold" style="margin: 3rem">
                            <label class="is-size-5">新用戶註冊</label>
                        </div>
                        <div class="field">
                            <div class="label is-normal">
                                <label for="email">Email</label>
                            </div>
                            <div class="">
                                <p class="control is-expanded has-icons-left">
                                        <span class="icon is-small is-left">
                                                <i class="fas fa-envelope"></i>
                                            </span>
                                    <input class="input" type="email" formControlName="email" required>
                                </p>
                                <div *ngIf="email.invalid && email.dirty" class="label help is-normal is-danger">
                                    <label for="invalidEmail">
                                        格式錯誤或{{ email.value }}已被使用
                                    </label> 
                                </div>
                                <div *ngIf="email.valid" class="label is-normal help is-success">
                                    <label for="validemail">
                                        {{ email.value }} 可用
                                    </label>
                                </div>
                                <div *ngIf="email.pending" class="label is-normal help is-info">
                                    Hold tight... 確認 {{ email.value }}
                                </div>
                            </div>
                        </div>
                        
                        <div class="field">
                            <div class="label is-normal">
                                <label for="displayName">用戶名</label>
                            </div>
                            <div class="">
                                <div class="content control is-expanded has-icons-left">
                                    <input class="input" type="displayName" formControlName="displayName" required>
                                    <span class="icon is-small is-left">
                                        <i class="fas fa-lock"></i>
                                    </span>
                                </div>
                                <div *ngIf="displayName.invalid && displayName.dirty" class="label help is-normal is-danger">
                                    <label for="invalidDisplayName">
                                        {{ displayName.value }} 已被使用
                                    </label>
                                </div>
                                <div *ngIf="displayName.valid" class="label is-normal help is-success">
                                    <label for="validDisplayName">
                                        {{ displayName.value }} 可用
                                    </label>
                                </div>
                                <div *ngIf="displayName.pending" class="label is-normal help is-info">
                                    Hold tight... 確認 {{ displayName.value }}
                                </div>
                            </div>                        
                        </div>
                        <div class="field">
                            <div class="label is-normal">
                                <label for="password">密碼</label>
                            </div>
                            <div class="">
                                <div class="content control is-expanded has-icons-left">
                                    <input class="input" type="password" formControlName="password" required>
                                    <span class="icon is-small is-left">
                                        <i class="fas fa-lock"></i>
                                    </span>
                                </div>
                                <div *ngIf="password.invalid && password.touched" class="label help is-normal is-danger">
                                    <label for="invalidPassword">
                                        密碼須介於6-24個英數字元
                                    </label>
                                </div>
                                <div *ngIf="signupForm.valid" class="label is-normal help is-success">
                                    <label for="vaildSignup">
                                        請按送出以完成
                                    </label>
                                </div>
                            </div>                        
                        </div>
                        
                        <div class="control is-right" style="padding-top: 2rem">
                            <button class="button is-pulled-right" type="submit" [disabled]="!signupForm.valid" (click)="signup()">
                                送出
                            </button>
                            <button class="button" (click)="auth.googleSignin()">
                                <i class="fa fa-google"></i> 以Google登入並註冊
                            </button>
                        </div>
                    </div>
                </div>
            </form>
        </div>   
    </ng-container>
</section>
<script src="https://kit.fontawesome.com/3ab715c41f.js"></script>
